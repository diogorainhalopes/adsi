<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="[[adsi-02-storage.pdf|Lecture 2 slides]]
Index  [[#Physical Storage Systems vs Logical Storage Systems|Physical Storage Systems vs Logical Storage Systems]]  [[#Physical Storage Systems vs Logical Storage Systems#Classification of Physical Storage Media|Classification of Physical Storage Media]]  [[#Classification of Physical Storage Media#Storage Interface|Storage Interface]]   [[#Physical Storage Systems vs Logical Storage Systems#Magnetic Hard Disk Mechanism (outdated)|Magnetic Hard Disk Mechanism (outdated)]]  [[#Magnetic Hard Disk Mechanism (outdated)#Speed of rotation bottlenecks READ/WRITE speed|Speed of rotation bottlenecks READ/WRITE speed]] [[#Magnetic Hard Disk Mechanism (outdated)#block = page|block = page]] [[#Magnetic Hard Disk Mechanism (outdated)#Performance Measure|Performance Measure]] [[#Magnetic Hard Disk Mechanism (outdated)#RAID - Redundant Arrays of Independent Disks|RAID - Redundant Arrays of Independent Disks]] [[#Magnetic Hard Disk Mechanism (outdated)#Optimization of Disk-Block Access|Optimization of Disk-Block Access]]   [[#Physical Storage Systems vs Logical Storage Systems#File Organization|File Organization]]  [[#File Organization#Fixed-Length Records|Fixed-Length Records]]  [[#Fixed-Length Records#Storing|Storing]] [[#Fixed-Length Records#Deleting|Deleting]]   [[#File Organization#Variable-Length Records|Variable-Length Records]]   [[#Physical Storage Systems vs Logical Storage Systems#Storing Large Objects|Storing Large Objects]] [[#Physical Storage Systems vs Logical Storage Systems#Multitable Clustering File Organization|Multitable Clustering File Organization]] [[#Physical Storage Systems vs Logical Storage Systems#Table Partitioning|Table Partitioning]]  [[#Table Partitioning#Horizontal Partitioning|Horizontal Partitioning]] [[#Table Partitioning#Vertical Partitioning|Vertical Partitioning]]   [[#Physical Storage Systems vs Logical Storage Systems#Data Dictionary (System Catalog)|Data Dictionary (System Catalog)]] [[#Physical Storage Systems vs Logical Storage Systems#Storage Access|Storage Access]] [[#Physical Storage Systems vs Logical Storage Systems#Column-Oriented Storage|Column-Oriented Storage]]    Physical Storage Systems vs Logical Storage Systems Files and bytes vs in-memory Tables"><meta property="og:title" content="Lecture 2 - Storage and file organization"><meta property="og:description" content="[[adsi-02-storage.pdf|Lecture 2 slides]]
Index  [[#Physical Storage Systems vs Logical Storage Systems|Physical Storage Systems vs Logical Storage Systems]]  [[#Physical Storage Systems vs Logical Storage Systems#Classification of Physical Storage Media|Classification of Physical Storage Media]]  [[#Classification of Physical Storage Media#Storage Interface|Storage Interface]]   [[#Physical Storage Systems vs Logical Storage Systems#Magnetic Hard Disk Mechanism (outdated)|Magnetic Hard Disk Mechanism (outdated)]]  [[#Magnetic Hard Disk Mechanism (outdated)#Speed of rotation bottlenecks READ/WRITE speed|Speed of rotation bottlenecks READ/WRITE speed]] [[#Magnetic Hard Disk Mechanism (outdated)#block = page|block = page]] [[#Magnetic Hard Disk Mechanism (outdated)#Performance Measure|Performance Measure]] [[#Magnetic Hard Disk Mechanism (outdated)#RAID - Redundant Arrays of Independent Disks|RAID - Redundant Arrays of Independent Disks]] [[#Magnetic Hard Disk Mechanism (outdated)#Optimization of Disk-Block Access|Optimization of Disk-Block Access]]   [[#Physical Storage Systems vs Logical Storage Systems#File Organization|File Organization]]  [[#File Organization#Fixed-Length Records|Fixed-Length Records]]  [[#Fixed-Length Records#Storing|Storing]] [[#Fixed-Length Records#Deleting|Deleting]]   [[#File Organization#Variable-Length Records|Variable-Length Records]]   [[#Physical Storage Systems vs Logical Storage Systems#Storing Large Objects|Storing Large Objects]] [[#Physical Storage Systems vs Logical Storage Systems#Multitable Clustering File Organization|Multitable Clustering File Organization]] [[#Physical Storage Systems vs Logical Storage Systems#Table Partitioning|Table Partitioning]]  [[#Table Partitioning#Horizontal Partitioning|Horizontal Partitioning]] [[#Table Partitioning#Vertical Partitioning|Vertical Partitioning]]   [[#Physical Storage Systems vs Logical Storage Systems#Data Dictionary (System Catalog)|Data Dictionary (System Catalog)]] [[#Physical Storage Systems vs Logical Storage Systems#Storage Access|Storage Access]] [[#Physical Storage Systems vs Logical Storage Systems#Column-Oriented Storage|Column-Oriented Storage]]    Physical Storage Systems vs Logical Storage Systems Files and bytes vs in-memory Tables"><meta property="og:type" content="website"><meta property="og:image" content="https://quartz.jzhao.xyz/icon.png"><meta property="og:url" content="https://quartz.jzhao.xyz/Lectures-Notes/Lecture-2-Storage-and-file-organization/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content="Lecture 2 - Storage and file organization"><meta name=twitter:description content="[[adsi-02-storage.pdf|Lecture 2 slides]]
Index  [[#Physical Storage Systems vs Logical Storage Systems|Physical Storage Systems vs Logical Storage Systems]]  [[#Physical Storage Systems vs Logical Storage Systems#Classification of Physical Storage Media|Classification of Physical Storage Media]]  [[#Classification of Physical Storage Media#Storage Interface|Storage Interface]]   [[#Physical Storage Systems vs Logical Storage Systems#Magnetic Hard Disk Mechanism (outdated)|Magnetic Hard Disk Mechanism (outdated)]]  [[#Magnetic Hard Disk Mechanism (outdated)#Speed of rotation bottlenecks READ/WRITE speed|Speed of rotation bottlenecks READ/WRITE speed]] [[#Magnetic Hard Disk Mechanism (outdated)#block = page|block = page]] [[#Magnetic Hard Disk Mechanism (outdated)#Performance Measure|Performance Measure]] [[#Magnetic Hard Disk Mechanism (outdated)#RAID - Redundant Arrays of Independent Disks|RAID - Redundant Arrays of Independent Disks]] [[#Magnetic Hard Disk Mechanism (outdated)#Optimization of Disk-Block Access|Optimization of Disk-Block Access]]   [[#Physical Storage Systems vs Logical Storage Systems#File Organization|File Organization]]  [[#File Organization#Fixed-Length Records|Fixed-Length Records]]  [[#Fixed-Length Records#Storing|Storing]] [[#Fixed-Length Records#Deleting|Deleting]]   [[#File Organization#Variable-Length Records|Variable-Length Records]]   [[#Physical Storage Systems vs Logical Storage Systems#Storing Large Objects|Storing Large Objects]] [[#Physical Storage Systems vs Logical Storage Systems#Multitable Clustering File Organization|Multitable Clustering File Organization]] [[#Physical Storage Systems vs Logical Storage Systems#Table Partitioning|Table Partitioning]]  [[#Table Partitioning#Horizontal Partitioning|Horizontal Partitioning]] [[#Table Partitioning#Vertical Partitioning|Vertical Partitioning]]   [[#Physical Storage Systems vs Logical Storage Systems#Data Dictionary (System Catalog)|Data Dictionary (System Catalog)]] [[#Physical Storage Systems vs Logical Storage Systems#Storage Access|Storage Access]] [[#Physical Storage Systems vs Logical Storage Systems#Column-Oriented Storage|Column-Oriented Storage]]    Physical Storage Systems vs Logical Storage Systems Files and bytes vs in-memory Tables"><meta name=twitter:image content="https://quartz.jzhao.xyz/icon.png"><title>Lecture 2 - Storage and file organization</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://quartz.jzhao.xyz//icon.png><link href=https://quartz.jzhao.xyz/styles.b369a84b3c6e6bfd686ad1f9da65641c.min.css rel=stylesheet><link href=https://quartz.jzhao.xyz/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://quartz.jzhao.xyz/js/darkmode.63d6a3e095d0bd2b935b62adec9dc11b.min.js></script>
<script src=https://quartz.jzhao.xyz/js/util.a0ccf91e1937fe761a74da4946452710.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script async src=https://quartz.jzhao.xyz/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://quartz.jzhao.xyz/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://quartz.jzhao.xyz/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://quartz.jzhao.xyz/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://quartz.jzhao.xyz/",fetchData=Promise.all([fetch("https://quartz.jzhao.xyz/indices/linkIndex.75b62903d737cf1cd28acaee866e0330.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://quartz.jzhao.xyz/indices/contentIndex.b97212c585da6f41ee7d5725abe8db20.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://quartz.jzhao.xyz",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://quartz.jzhao.xyz",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}function i(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const a=document.querySelectorAll("a");for(link of a)link.className.includes("root-title")&&link.addEventListener("click",i,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/quartz.jzhao.xyz\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=quartz.jzhao.xyz src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://quartz.jzhao.xyz/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://quartz.jzhao.xyz/>ADSI Notes - Diogo Lopes</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Lecture 2 - Storage and file organization</h1><p class=meta>Last updated
Mar 15, 2023
<a href=https://github.com/diogorainhalopes/Lectures-Notes/Lecture%202%20-%20Storage%20and%20file%20organization.md rel=noopener>Edit Source</a></p><ul class=tags></ul><p><a class="internal-link broken">Lecture 2 slides</a></p><a href=#index><h3 id=index><span class=hanchor arialabel=Anchor># </span>Index</h3></a><ul><li><a href=#physical-storage-systems-vs-logical-storage-systems rel=noopener class=internal-link data-src>Physical Storage Systems vs Logical Storage Systems</a><ul><li><a href=#physical-storage-systems-vs-logical-storage-systems rel=noopener class=internal-link data-src>Classification of Physical Storage Media</a><ul><li><a href=#classification-of-physical-storage-media rel=noopener class=internal-link data-src>Storage Interface</a></li></ul></li><li><a href=#physical-storage-systems-vs-logical-storage-systems rel=noopener class=internal-link data-src>Magnetic Hard Disk Mechanism (outdated)</a><ul><li><a href=#magnetic-hard-disk-mechanism-outdated rel=noopener class=internal-link data-src>WRITE speed</a></li><li><a href=#magnetic-hard-disk-mechanism-outdated rel=noopener class=internal-link data-src>block = page</a></li><li><a href=#magnetic-hard-disk-mechanism-outdated rel=noopener class=internal-link data-src>Performance Measure</a></li><li><a href=#magnetic-hard-disk-mechanism-outdated rel=noopener class=internal-link data-src>RAID - Redundant Arrays of Independent Disks</a></li><li><a href=#magnetic-hard-disk-mechanism-outdated rel=noopener class=internal-link data-src>Optimization of Disk-Block Access</a></li></ul></li><li><a href=#physical-storage-systems-vs-logical-storage-systems rel=noopener class=internal-link data-src>File Organization</a><ul><li><a href=#file-organization rel=noopener class=internal-link data-src>Fixed-Length Records</a><ul><li><a href=#fixed-length-records rel=noopener class=internal-link data-src>Storing</a></li><li><a href=#fixed-length-records rel=noopener class=internal-link data-src>Deleting</a></li></ul></li><li><a href=#file-organization rel=noopener class=internal-link data-src>Variable-Length Records</a></li></ul></li><li><a href=#physical-storage-systems-vs-logical-storage-systems rel=noopener class=internal-link data-src>Storing Large Objects</a></li><li><a href=#physical-storage-systems-vs-logical-storage-systems rel=noopener class=internal-link data-src>Multitable Clustering File Organization</a></li><li><a href=#physical-storage-systems-vs-logical-storage-systems rel=noopener class=internal-link data-src>Table Partitioning</a><ul><li><a href=#table-partitioning rel=noopener class=internal-link data-src>Horizontal Partitioning</a></li><li><a href=#table-partitioning rel=noopener class=internal-link data-src>Vertical Partitioning</a></li></ul></li><li><a href=#physical-storage-systems-vs-logical-storage-systems rel=noopener class=internal-link data-src>Data Dictionary (System Catalog)</a></li><li><a href=#physical-storage-systems-vs-logical-storage-systems rel=noopener class=internal-link data-src>Storage Access</a></li><li><a href=#physical-storage-systems-vs-logical-storage-systems rel=noopener class=internal-link data-src>Column-Oriented Storage</a></li></ul></li></ul><a href=#physical-storage-systems-vs-logical-storage-systems><h3 id=physical-storage-systems-vs-logical-storage-systems><span class=hanchor arialabel=Anchor># </span>Physical Storage Systems vs Logical Storage Systems</h3></a><p>Files and bytes vs in-memory Tables</p><a href=#classification-of-physical-storage-media><h4 id=classification-of-physical-storage-media><span class=hanchor arialabel=Anchor># </span>Classification of Physical Storage Media</h4></a><ul><li><strong>Volatile storage</strong>: Loses contents when power is switched off (ex: RAM)</li><li><strong>Non-volatile storage</strong>: Contents persist even when power is switched off. • Includes secondary and tertiary storage, as well as batter-backed up main-memory (ex: Disk)</li></ul><p>What happens when we lose an hard drive?
Need to bring the data to volatile storage in order to perform queries</p><p><mark><strong>Fastest memory: Cache in CPU, but scarce and smallest</strong></mark></p><ul><li><strong>Primary</strong>: Cache, Main Memory (Volatile)</li><li><strong>Secondary</strong>: Flash Memory, Magnetic Disk (Non-Volatile. &ldquo;on-line storage&rdquo;)</li><li><strong>Tertiary</strong>: Optical Storage, Magnetic Tape (&ldquo;off-line storage&rdquo; and used for archival)</li></ul><p><img src=https://quartz.jzhao.xyz//assets/storage-hierarchy.png width=auto alt=storage-hierarchy.png>
<em>Performance vs Storage</em></p><p>Main storages talked about in the course: RAM and Magnetic Disk</p><a href=#storage-interface><h5 id=storage-interface><span class=hanchor arialabel=Anchor># </span>Storage Interface</h5></a><ul><li><p>SATA</p></li><li><p>SAS</p></li><li><p>NVMe (Fastest Non-volatile)</p></li><li><p>Disks usually connected directly to computer system</p></li><li><p>In Storage Area Networks (SAN), a large number of disks are connected by a high-speed network to a number of servers</p></li><li><p>In Network Attached Storage (NAS) networked storage provides a file system interface using networked file system protocol, instead of providing a disk system interface</p></li></ul><a href=#magnetic-hard-disk-mechanism-outdated><h4 id=magnetic-hard-disk-mechanism-outdated><span class=hanchor arialabel=Anchor># </span>Magnetic Hard Disk Mechanism (outdated)</h4></a><p>Let&rsquo;s see why hardware can have such an impact on performance
Hard drives are REALLY SLOW (7200rpm), even when level and multiple needles. With 6 needles, we still dont even have 1 order of magnitude of improvement
<a class="internal-link broken">magnetic_hdd.png</a></p><p>If you are reading the inner track or the outter track, you are subjected to seek time (needle moving takes <em>milliseconds</em>)</p><a href=#speed-of-rotation-bottlenecks-readwrite-speed><h5 id=speed-of-rotation-bottlenecks-readwrite-speed><span class=hanchor arialabel=Anchor># </span>Speed of rotation bottlenecks READ/WRITE speed</h5></a><p>Databases data should be stored sequencially along the tracks (tables), so when you need to read a table, you dont need to jump the needle to different places (reduce seek time)
The physical table should be stored imitating the logical data stucture of a table</p><a href=#block--page><h5 id=block--page><span class=hanchor arialabel=Anchor># </span>block = page</h5></a><p>Usually when fetching data, it&rsquo;s read in blocks
SQL refers to blocks as pages (informal &ldquo;chunks&rdquo;)
You cant read/write 1 byte, you read/write block (usually 4 or 8 KB)</p><p>Blocks are often refered to hardware and are 4KB
SQL uses 8KB pages as pages are associated to memory</p><p>You retrieve a block to a page in memory</p><a href=#performance-measure><h5 id=performance-measure><span class=hanchor arialabel=Anchor># </span>Performance Measure</h5></a><p><strong>Mean time to failure (MTTF)</strong>
The average time the disk is expected to run continuously without any failure.
- Typically 3 to 5 years
- Probability of failure of new disks is quite low, corresponding to a “theoretical MTTF” of 500,000 to 1,200,000 hours for a new disk • E.g., an MTTF of 1,200,000 hours for a new disk means that given 1000 relatively new disks, on an average one will fail every 1200 hours
- MTTF decreases as disk ages</p><p>HDD usually fails because of mechanical error in a sense of, you can no longer write data to it.</p><p>More Disks -> More chance of failure
Each Disk lasts 1M hours -> 1000 Disks -> first fail on average in 1000 hours</p><a href=#raid---redundant-arrays-of-independent-disks><h5 id=raid---redundant-arrays-of-independent-disks><span class=hanchor arialabel=Anchor># </span>RAID - Redundant Arrays of Independent Disks</h5></a><ul><li><strong>RAID Level 0</strong>: Block striping; non-redundant.
<a class="internal-link broken">RAID_0.png</a></li><li><strong>RAID Level 1</strong>: Mirrored disks with block striping
Not the best, 2x space and 2x write
<a class="internal-link broken">RAID_1.png</a></li><li><strong>RAID Level 5</strong>: Block-Interleaved Distributed Parity
1 XOR 1 = 0 | 1 XOR 0 = 1
if you lose your data
1 XOR ? = 0 | ? XOR 0 = 1
you can guess that ? was 1
<a class="internal-link broken">RAID_5.png</a>
5 blocks per Disk, P0 (Parity Block) is used as storage for the XOR operation with the other blocks, using PO to retrieve the data lost. Parity Blocks use round-robin, so if you lose a disk, you can reconstruct the data and recompute the Parity Block (1 P per Disk )</li></ul><a href=#optimization-of-disk-block-access><h5 id=optimization-of-disk-block-access><span class=hanchor arialabel=Anchor># </span>Optimization of Disk-Block Access</h5></a><ul><li><strong>Buffering</strong>: in-memory buffer to cache disk blocks</li><li><strong>Read-ahead</strong>: Read extra blocks from a track in anticipation that they will be requested soon</li><li><strong>Disk-arm-scheduling</strong> algorithms re-order block requests so that disk arm movement is minimized<ul><li>Elevator algorithm</li></ul></li><li><strong>Disk Controller</strong> can remmap physical accesses to make them sequential</li></ul><a href=#file-organization><h4 id=file-organization><span class=hanchor arialabel=Anchor># </span>File Organization</h4></a><p>The database is stored as a collection of files.
Each file is a sequence of records.
A record is a sequence of fields.</p><p>We assume that records are smaller than a disk block.</p><a href=#fixed-length-records><h5 id=fixed-length-records><span class=hanchor arialabel=Anchor># </span>Fixed-Length Records</h5></a><p>Same table records stored in blocks
If magnetic disk, should store the blocks sequencially, to read the table faster</p><a href=#storing><h6 id=storing><span class=hanchor arialabel=Anchor># </span>Storing</h6></a><p>Store record <em><strong>i</strong></em> starting from byte <em><strong>n * (i – 1)</strong></em>, where <em><strong>n</strong></em> is the size of each record.
Record access is simple but records may cross blocks
Modification: do not allow records to cross block boundaries</p><p><a class="internal-link broken">records.png</a></p><a href=#deleting><h6 id=deleting><span class=hanchor arialabel=Anchor># </span>Deleting</h6></a><p>Deletion of record i:</p><ol><li>move records <em><strong>i + 1, . . ., n</strong></em> to <em><strong>i, . . . , n – 1</strong></em></li><li>move record <em><strong>n to i</strong></em></li><li>do not move records, but link all free records on a free list</li></ol><p>Record 3 deleted -> Record 2 and 4 are now together
<em><strong>BAD APROACH, because you need to reorganized a lot of records, while pulling back the list</strong></em></p><p><strong>Better Deletion</strong></p><ol><li>move records <em><strong>i + 1, . . ., n</strong></em> to <em><strong>i, . . . , n – 1</strong></em></li><li>move record <em><strong>n to i</strong></em></li><li>do not move records, but link all free records on a free list
Record 3 deleted and replaced by record 11 -> 2, 11, 4, &mldr;</li></ol><p><strong>Another Alternative</strong></p><ol><li>move records <em><strong>i + 1, . . ., n</strong></em> to <em><strong>i, . . . , n – 1</strong></em></li><li>move record n to i</li><li>do not move records, but link all free records on a free list -> 2, null, 4, &mldr;</li></ol><a href=#variable-length-records><h5 id=variable-length-records><span class=hanchor arialabel=Anchor># </span>Variable-Length Records</h5></a><p>Usually there is a header with this information in the blocks
Variable-length records arise in database systems in several ways:</p><ul><li>Storage of multiple record types in a file.</li><li>Record types that allow variable lengths for one or more fields such as strings (varchar)</li><li>Record types that allow repeating fields (used in some older data models).
Attributes are stored in order
Variable length attributes represented by fixed size (offset, length), with actual data stored after all fixed length attributes
Null values represented by null-value bitmap</li></ul><a href=#storing-large-objects><h4 id=storing-large-objects><span class=hanchor arialabel=Anchor># </span>Storing Large Objects</h4></a><ul><li><em><strong>blob</strong></em>/<em><strong>clob</strong></em> types</li><li>Records must be smaller than pages</li><li>Alternatives:<ul><li>Store as files in file systems</li><li>Store as files managed by database</li><li>Break into pieces and store in multiple tuples in separate relation</li></ul></li></ul><a href=#multitable-clustering-file-organization><h4 id=multitable-clustering-file-organization><span class=hanchor arialabel=Anchor># </span>Multitable Clustering File Organization</h4></a><p>On disk, multiple logical tables are stored in the same physical table
In the course were going to utilize the oposite, one logical table to multiple physical tables (Table Partitioning)
<a class="internal-link broken">MCFO.png</a></p><a href=#table-partitioning><h4 id=table-partitioning><span class=hanchor arialabel=Anchor># </span>Table Partitioning</h4></a><p>Conceptually, we have one table, but in physical terms we have multiple tables (good for performance)</p><a href=#horizontal-partitioning><h5 id=horizontal-partitioning><span class=hanchor arialabel=Anchor># </span>Horizontal Partitioning</h5></a><p>Imagina a table of &ldquo;orders&rdquo; we might want to separate orders of 2018, 2019&mldr;
Most likely you will be working with orders related to the year.</p><ul><li>Partitioning<ul><li>Reduces costs of some operations such as free space management</li><li>Allows different partitions to be stored on different storage devices<ul><li>E.g., transaction partition for current year on SSD, for older years on magnetic disk</li></ul></li></ul></li></ul><a href=#vertical-partitioning><h5 id=vertical-partitioning><span class=hanchor arialabel=Anchor># </span>Vertical Partitioning</h5></a><a href=#data-dictionary-system-catalog><h4 id=data-dictionary-system-catalog><span class=hanchor arialabel=Anchor># </span>Data Dictionary (System Catalog)</h4></a><ul><li>Stores metadata</li><li>Information about relations</li><li>User and accounting information, including passwords</li><li>Statistical and descriptive data</li><li>Physical file organization information</li><li>Information about indices
<a class="internal-link broken">sys_meta.png</a></li></ul><a href=#storage-access><h4 id=storage-access><span class=hanchor arialabel=Anchor># </span>Storage Access</h4></a><p>If you want to read from disk, you need to bring to memory and read it from there.</p><p><strong>Buffer</strong>: portion of main memory available to store copies of disk blocks.
<strong>Buffer manager</strong>: subsystem responsible for allocating buffer space in main memory.</p><a href=#column-oriented-storage><h4 id=column-oriented-storage><span class=hanchor arialabel=Anchor># </span>Column-Oriented Storage</h4></a><p><a class="internal-link broken">col_oriented_storage.png</a>
<strong>Benefits</strong>:</p><ul><li>Reduced IO if only some attributes are accessed</li><li>Improved CPU cache performance</li><li>Improved compression</li><li>Vector processing on modern CPU architectures
<strong>Drawbacks</strong>:</li><li>Cost of tuple reconstruction from columnar representation</li><li>Cost of tuple deletion and update</li><li>Cost of decompression</li></ul><p>Columnar representation found to be more efficient for decision support than row-oriented representation (same data type)</p><p>Traditional row-oriented representation preferable for transaction processing</p><p>When you can fit in-memory, it becomes better to store in column to perform operations
(Vector processing, Parallel, special CPU ops&mldr;)</p><p>In this course we are dealing with data that does not fit in-memory&mldr;</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script async src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://quartz.jzhao.xyz/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by Diogo Lopes using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2023</p><ul><li><a href=https://quartz.jzhao.xyz/>Home</a></li><li><a href=https://github.com/diogorainhalopes>GitHub</a></li></ul></footer></div></div></body></html>